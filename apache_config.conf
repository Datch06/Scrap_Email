# Configuration Apache pour admin.perfect-cocon-seo.fr
# À copier dans /etc/apache2/sites-available/admin.perfect-cocon-seo.fr.conf

<VirtualHost *:80>
    ServerName admin.perfect-cocon-seo.fr
    ServerAdmin webmaster@perfect-cocon-seo.fr

    # Logs
    ErrorLog ${APACHE_LOG_DIR}/scrap-email-error.log
    CustomLog ${APACHE_LOG_DIR}/scrap-email-access.log combined

    # Proxy vers l'application Flask
    ProxyPreserveHost On
    ProxyPass / http://127.0.0.1:5000/
    ProxyPassReverse / http://127.0.0.1:5000/

    # Headers pour le proxy
    RequestHeader set X-Forwarded-Proto "http"
    RequestHeader set X-Forwarded-Port "80"

    # Activer les modules nécessaires:
    # sudo a2enmod proxy
    # sudo a2enmod proxy_http
    # sudo a2enmod headers
</VirtualHost>

# Configuration HTTPS (à activer avec Let's Encrypt)
# <VirtualHost *:443>
#     ServerName admin.perfect-cocon-seo.fr
#     ServerAdmin webmaster@perfect-cocon-seo.fr
#
#     # SSL
#     SSLEngine on
#     SSLCertificateFile /etc/letsencrypt/live/admin.perfect-cocon-seo.fr/fullchain.pem
#     SSLCertificateKeyFile /etc/letsencrypt/live/admin.perfect-cocon-seo.fr/privkey.pem
#
#     # Logs
#     ErrorLog ${APACHE_LOG_DIR}/scrap-email-error.log
#     CustomLog ${APACHE_LOG_DIR}/scrap-email-access.log combined
#
#     # Proxy vers l'application Flask
#     ProxyPreserveHost On
#     ProxyPass / http://127.0.0.1:5000/
#     ProxyPassReverse / http://127.0.0.1:5000/
#
#     # Headers pour le proxy
#     RequestHeader set X-Forwarded-Proto "https"
#     RequestHeader set X-Forwarded-Port "443"
# </VirtualHost>
